#!/usr/bin/env bash
# $1 status
# $2 escape nonprinting chars
set -euo pipefail

esc_tput() {
  local format=%s
  if [[ ${1-0} -ne 0 ]]; then
    format="\001$format\002"
  fi
  shift
  printf "$format" "$(tput "$@")"
}

# "bin$ "
echo "$(basename "$PWD")$(esc_tput "$2" setaf $(($1 ? 1 : 2)))\$ $(esc_tput "$2" sgr0)"
exit "$1"